# ==================================
# CONFIGURACIÓN DEL SISTEMA GASTRONÓMICO
# Stack: FastAPI + MySQL + React + Vite + Redis
# ==================================

# Información básica del restaurante
RESTAURANT_NAME="Mi Restaurante"
RESTAURANT_ADDRESS="Av. Corrientes 1234, Buenos Aires"
RESTAURANT_PHONE="+54 11 1234-5678"
RESTAURANT_EMAIL="info@mirestaurante.com"

# ==================================
# BASE DE DATOS - MySQL 8.0
# ==================================

# MySQL - Producción
DATABASE_URL="mysql+pymysql://gastronomy_user:password@localhost:3306/gastronomy_db?charset=utf8mb4"

# Para desarrollo local con Docker
DATABASE_URL_DOCKER="mysql+pymysql://gastronomy_user:gastronomy_password@mysql:3306/gastronomy_db?charset=utf8mb4"

# Para testing
DATABASE_URL_TEST="mysql+pymysql://test_user:test_password@localhost:3306/gastronomy_test?charset=utf8mb4"

# Configuración MySQL específica
DB_PRIMARY_HOST=your-mysql-host
DB_PRIMARY_USER=your-mysql-user
DB_PRIMARY_PASSWORD=your-mysql-password
DB_PRIMARY_NAME=your-database-name
DB_PRIMARY_PORT=3306
MYSQL_CHARSET="utf8mb4"
MYSQL_COLLATION="utf8mb4_unicode_ci"

# Configuración de conexión
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=30
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600

# ==================================
# AUTENTICACIÓN Y SEGURIDAD
# ==================================

# JWT Secrets (¡CAMBIAR EN PRODUCCIÓN!)
JWT_SECRET="mi-super-secreto-jwt-gastronomy-2025-mysql"
JWT_REFRESH_SECRET="mi-refresh-secret-gastronomy-2025-mysql"
JWT_ALGORITHM="HS256"
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=60
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7

# Encriptación para datos sensibles
ENCRYPTION_KEY="mi-clave-de-encriptacion-32-chars"

# Rate limiting
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_WINDOW=60  # segundos

# ==================================
# STRIPE - PROCESAMIENTO DE PAGOS
# ==================================

# Stripe API Keys (usar test keys en desarrollo)
STRIPE_SECRET_KEY="sk_test_51xxxxxxxxxxxxxxxxxxxxxxxxxxxxx"
STRIPE_PUBLISHABLE_KEY="pk_test_51xxxxxxxxxxxxxxxxxxxxxxxxxxxxx"

# Webhooks de Stripe
STRIPE_WEBHOOK_SECRET="whsec_xxxxxxxxxxxxxxxxxxxxxxxxxxxxx"

# Configuración de pagos
PAYMENT_CURRENCY="ARS"
STRIPE_SUCCESS_URL="http://localhost:3000/payment/success"
STRIPE_CANCEL_URL="http://localhost:3000/payment/cancel"

# ==================================
# APLICACIÓN - BACKEND FastAPI
# ==================================

# Configuración del servidor
APP_NAME="Sistema Gastronómico"
APP_VERSION="1.0.0"
DEBUG=true
PORT=8000
HOST="0.0.0.0"

# URLs importantes
FRONTEND_URL="http://localhost:3000"
BACKEND_URL="http://la :8000"
API_BASE_URL="http://localhost:8000/api/v1"

# Entorno de ejecución
ENVIRONMENT="development"  # development, staging, production

# ==================================
# FRONTEND - REACT + VITE
# ==================================

# Variables para Vite (deben empezar con VITE_)
VITE_API_URL="http://localhost:8000"
VITE_WS_URL="ws://localhost:8000/ws"
VITE_APP_NAME="Sistema Gastronómico"
VITE_ENVIRONMENT="development"

# Stripe para frontend
VITE_STRIPE_PUBLISHABLE_KEY="pk_test_51xxxxxxxxxxxxxxxxxxxxxxxxxxxxx"

# Configuración de desarrollo Vite
VITE_PORT=3000
VITE_HOST="0.0.0.0"
VITE_OPEN=false
VITE_HMR_PORT=24678

# ==================================
# REDIS - CACHE Y WEBSOCKETS
# ==================================

# Redis para WebSocket scaling y cache
REDIS_URL="redis://localhost:6379/0"
REDIS_HOST="localhost"
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=""

# Configuración de cache
CACHE_ENABLED=true
CACHE_DEFAULT_TIMEOUT=300  # 5 minutos
CACHE_PRODUCT_TIMEOUT=1800  # 30 minutos
CACHE_MENU_TIMEOUT=3600    # 1 hora

# WebSocket con Redis
REDIS_WS_CHANNEL="gastronomy_websockets"
WS_HEARTBEAT_INTERVAL=30
WS_RECONNECT_INTERVAL=5000

# ==================================
# ARCHIVOS Y STORAGE
# ==================================

# Almacenamiento local
UPLOAD_DIR="./uploads"
STATIC_DIR="./static"
MAX_FILE_SIZE=5242880  # 5MB en bytes

# Tipos de archivo permitidos
ALLOWED_IMAGE_TYPES="jpg,jpeg,png,webp,gif"
ALLOWED_DOCUMENT_TYPES="pdf,doc,docx,txt"

# AWS S3 (opcional para producción)
AWS_ACCESS_KEY_ID="tu-aws-access-key"
AWS_SECRET_ACCESS_KEY="tu-aws-secret-key"
AWS_BUCKET_NAME="gastronomy-uploads"
AWS_REGION="us-east-1"

# ==================================
# EMAIL Y NOTIFICACIONES
# ==================================

# SMTP para emails (facturas, confirmaciones)
SMTP_HOST="smtp.gmail.com"
SMTP_PORT=587
SMTP_USERNAME="tu-email@gmail.com"
SMTP_PASSWORD="tu-app-password"
SMTP_USE_TLS=true

# Configuración de emails
FROM_EMAIL="noreply@mirestaurante.com"
FROM_NAME="Mi Restaurante"

# SMS (opcional para notificaciones)
TWILIO_ACCOUNT_SID="tu-twilio-sid"
TWILIO_AUTH_TOKEN="tu-twilio-token"
TWILIO_PHONE_NUMBER="+1234567890"

# ==================================
# INTEGRATIONES EXTERNAS
# ==================================

# Delivery Apps APIs (para futuro)
UBER_EATS_API_KEY=""
RAPPI_API_KEY=""
PEDIDOS_YA_API_KEY=""

# Contabilidad (para futuro)
AFIP_CUIT="20123456789"
AFIP_CERTIFICATE_PATH="./certificates/afip.pem"

# POS/Hardware (para futuro)
THERMAL_PRINTER_IP="192.168.1.100"
CASH_DRAWER_PORT="COM1"

# ==================================
# MONITOREO Y LOGS
# ==================================

# Logging
LOG_LEVEL="INFO"  # DEBUG, INFO, WARNING, ERROR
LOG_FILE="./logs/gastronomy.log"
LOG_MAX_SIZE=10485760  # 10MB
LOG_BACKUP_COUNT=5

# Sentry para monitoring de errores (producción)
SENTRY_DSN=""

# Métricas y analytics
ANALYTICS_ENABLED=true
METRICS_ENDPOINT="/metrics"

# ==================================
# FEATURES FLAGS
# ==================================

# Funcionalidades opcionales
ENABLE_DELIVERY=false
ENABLE_RESERVATIONS=false
ENABLE_LOYALTY_PROGRAM=false
ENABLE_INVENTORY_TRACKING=true
ENABLE_KITCHEN_DISPLAY=true
ENABLE_MOBILE_ORDERS=true

# Configuración de inventario
INVENTORY_LOW_STOCK_ALERT=true
INVENTORY_AUTO_REORDER=false
INVENTORY_TRACK_COSTS=true

# ==================================
# DESARROLLO Y TESTING
# ==================================

# Configuración de desarrollo
DEV_RELOAD=true
DEV_CREATE_SAMPLE_DATA=true
DEV_SHOW_SQL_QUERIES=false

# Testing con MySQL
TEST_DATABASE_URL="mysql+pymysql://test_user:test_password@localhost:3306/gastronomy_test?charset=utf8mb4"
TEST_SKIP_AUTH=false
TEST_MOCK_STRIPE=true
TEST_MOCK_EMAIL=true

# Fixtures de testing
TEST_ADMIN_EMAIL="admin@test.com"
TEST_ADMIN_PASSWORD="admin123"
TEST_WAITER_EMAIL="mesero@test.com"
TEST_WAITER_PASSWORD="mesero123"

# ==================================
# PERFORMANCE Y CACHE
# ==================================

# MySQL Query Optimization
ENABLE_QUERY_LOGGING=false
SLOW_QUERY_THRESHOLD=1000  # ms
MYSQL_QUERY_CACHE_SIZE=67108864  # 64MB

# Performance tuning
MYSQL_INNODB_BUFFER_POOL_SIZE=268435456  # 256MB
MYSQL_MAX_CONNECTIONS=200
MYSQL_CONNECT_TIMEOUT=10

# ==================================
# CONFIGURACIÓN ESPECÍFICA DE COCINA
# ==================================

# Tiempos y alertas de cocina
KITCHEN_ORDER_TIMEOUT=30     # minutos antes de alerta
KITCHEN_AUTO_ACCEPT_ORDERS=false
KITCHEN_DISPLAY_REFRESH=5    # segundos

# Configuración de preparación
DEFAULT_PREPARATION_TIME=20  # minutos
MAX_CONCURRENT_ORDERS=10     # órdenes simultáneas en cocina
PREPARATION_BUFFER_TIME=5    # minutos extra por seguridad

# ==================================
# CONFIGURACIÓN DE MESAS
# ==================================

# Layout del restaurante
MAX_TABLES=50
DEFAULT_TABLE_CAPACITY=4
AUTO_ASSIGN_TABLES=false

# Tiempos de mesa
TABLE_TURNOVER_TARGET=90     # minutos promedio por mesa
TABLE_RESERVATION_WINDOW=15  # minutos de gracia para llegada

# ==================================
# REPORTES Y ANALYTICS
# ==================================

# Configuración de reportes
REPORTS_TIMEZONE="America/Argentina/Buenos_Aires"
REPORTS_AUTO_GENERATE=true
REPORTS_EMAIL_DAILY=true

# Métricas importantes
TRACK_PREPARATION_TIMES=true
TRACK_CUSTOMER_SATISFACTION=false
TRACK_INGREDIENT_COSTS=true
TRACK_WASTE=false

# ==================================
# CONFIGURACIÓN MYSQL PARA PRODUCCIÓN
# ==================================

# Optimización MySQL para restaurantes
MYSQL_INNODB_LOG_FILE_SIZE=67108864      # 64MB
MYSQL_TMP_TABLE_SIZE=33554432            # 32MB
MYSQL_MAX_HEAP_TABLE_SIZE=33554432       # 32MB
MYSQL_SORT_BUFFER_SIZE=2097152           # 2MB
MYSQL_READ_BUFFER_SIZE=131072            # 128KB

# Replicación (producción)
MYSQL_MASTER_HOST=""
MYSQL_SLAVE_HOST=""
MYSQL_REPLICATION_USER=""
MYSQL_REPLICATION_PASSWORD=""

# ==================================
# CONFIGURACIÓN DE PRODUCCIÓN
# ==================================

# SSL/TLS
SSL_ENABLED=false
SSL_CERT_PATH=""
SSL_KEY_PATH=""

# Reverse proxy (nginx, etc.)
BEHIND_PROXY=false
PROXY_COUNT=1

# Backup automático MySQL
AUTO_BACKUP_ENABLED=true
BACKUP_SCHEDULE="0 2 * * *"  # Diario a las 2 AM
BACKUP_RETENTION_DAYS=30
MYSQL_BACKUP_PATH="./backups/mysql"

# Monitoring
PROMETHEUS_ENABLED=false
GRAFANA_ENABLED=false
HEALTH_CHECK_INTERVAL=30